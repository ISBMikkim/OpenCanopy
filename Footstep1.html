<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Footstep 1: Let's Go!</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0F9FF; /* Light blue background */
            color: #1E3A8A; /* Dark blue text */
        }
        
        /* Main container for the adventure cards */
        .adventure-container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1rem;
        }

        /* Styling for each 'adventure card' */
        .adventure-card {
            background-color: #FFFFFF;
            border-radius: 24px; /* More rounded corners */
            padding: 2.5rem; /* More padding */
            margin-bottom: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 4px solid #BFDBFE; /* Light blue border */
            position: relative; /* For positioning the play button */
        }
        
        /* Header styles */
        .adventure-header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .adventure-header h1 {
            font-size: 3rem; /* Larger title */
            font-weight: 700;
            color: #1D4ED8; /* Stronger blue */
            text-shadow: 2px 2px #DBEAFE;
        }

        .adventure-header p {
            font-size: 1.25rem;
            color: #1E4ED8;
        }

        /* Styling for list items in the activity card */
        .activity-li {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: #EFF6FF; /* Very light blue */
            border-radius: 16px;
            transition: all 0.2s ease-in-out;
        }
        .activity-li:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .activity-li-content {
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        /* Language switcher styles */
        #lang-switcher-container {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 10;
        }
        
        #lang-switcher {
            padding: 0.5rem 1rem;
            border-radius: 12px;
            border: 2px solid #BFDBFE;
            background-color: #FFFFFF;
            color: #1E4ED8;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Text-to-speech play button styles */
        .tts-button {
            position: absolute;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 50px;
            height: 50px;
            background-color: #2563EB; /* Bright blue */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: 3px solid #FFFFFF;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.2s ease-in-out;
        }
        .tts-button:hover {
            background-color: #1D4ED8; /* Darker blue */
            transform: scale(1.05);
        }
        .tts-button:active {
            transform: scale(0.95);
        }
        .tts-icon {
            width: 24px;
            height: 24px;
            fill: #FFFFFF; /* White icon */
        }

        /* Speech-to-Text (Microphone) button styles */
        .stt-button {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            background-color: #3B82F6; /* Blue */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: 2px solid #FFFFFF;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-in-out;
        }
        .stt-button:hover {
            background-color: #2563EB;
        }
        .stt-button.is-listening {
            background-color: #EF4444; /* Red when listening */
            animation: pulse 1.5s infinite;
        }
        .stt-icon {
            width: 20px;
            height: 20px;
            fill: #FFFFFF;
        }

        /* Pulse animation for listening */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        /* Container for the textarea to position the mic button */
        .textarea-container {
            position: relative;
        }

        /* Make textarea not overlap with mic button */
        #introduction {
            padding-right: 60px; /* Space for the mic button */
        }
    </style>
</head>
<body class="bg-blue-50">

    <!-- Language Switcher -->
    <div id="lang-switcher-container">
        <select id="lang-switcher" onchange="changeLanguage(this.value)">
            <option value="en">English (English)</option>
            <option value="fr">Fran√ßais (French)</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥ (Korean)</option>
            <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
        </select>
    </div>

    <!-- Main Content Container -->
    <div class="adventure-container">

        <!-- Header Card -->
        <header class="adventure-header adventure-card bg-white" style="background-color: #E0F2FE; border-color: #BAE6FD;">
            <h1 data-key="title" class="text-4xl md:text-5xl font-bold text-blue-800 mb-4">Footstep 1: Let's Go!</h1>
            <p data-key="subtitle" class="text-xl text-blue-700">Let's start our learning adventure together!</p>
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </header>

        <!-- What is Footstep 1? Card -->
        <section class="adventure-card" style="background-color: #F0FDF4; border-color: #BBF7D0;">
            <h2 class="text-3xl font-bold text-green-800 mb-4" data-key="whatIsTitle">ü§î What is Footstep 1?</h2>
            <p class="text-lg text-green-700" data-key="whatIsBody">
                In Footstep 1, we start our amazing journey! We learn about Paul Salopek, a journalist who is walking around the whole world! We introduce ourselves, choose a special avatar, and start talking with other students about this incredible walking adventure!
            </p>
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </section>

        <!-- Why is it Important? Card -->
        <section class="adventure-card" style="background-color: #FFFBEB; border-color: #FDE68A;">
            <h2 class="text-3xl font-bold text-amber-800 mb-4" data-key="whyTitle">üéØ Why is Footstep 1 Important?</h2>
            <p class="text-lg text-amber-700" data-key="whyBody">
                Footstep 1 helps us start our learning journey together! We get to know Paul Salopek and his amazing walk around the world. We also get to know each other by sharing about ourselves and choosing avatars. This helps us become walking partners who will learn and explore together!
            </p>
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </section>
        
        <!-- Meet Paul Card -->
        <section class="adventure-card" style="background-color: #FEF2F2; border-color: #FECACA;">
            <h2 class="text-3xl font-bold text-red-800 mb-6" data-key="meetPaulTitle">üëã Meet Paul Salopek!</h2>
            <p class="text-lg text-red-700 mb-6" data-key="meetPaulBody">
                Paul is an explorer (like a journalist!) who is on a super long walk around the world, following the path of the first humans. He is walking to listen to stories from all different kinds of people.
            </p>
            <ul class="space-y-4 text-lg md:text-xl">
                <li class="activity-li" style="background-color: #FFFAF0; border: 2px solid #FEEBCB;">
                    <a href="https://www.youtube.com/watch?v=RjhMRhn83IA" target="_blank" class="activity-li-content" rel="noopener noreferrer">
                        <span class="text-2xl">üéß</span>
                        <span class="font-semibold text-orange-700" data-key="paulLink1">Listen to Paul's welcome message from his journey</span>
                    </a>
                </li>
                <li class="activity-li" style="background-color: #F0FAFF; border: 2px solid #D6EEFF;">
                    <a href="https://vimeo.com/175964614" target="_blank" class="activity-li-content" rel="noopener noreferrer">
                        <span class="text-2xl">üì∫</span>
                        <span class="font-semibold text-sky-700" data-key="paulLink2">Watch a video about why Paul is walking around the world</span>
                    </a>
                </li>
            </ul>
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </section>

        <!-- Activities Card -->
        <section class="adventure-card" style="background-color: #FAF5FF; border-color: #E9D5FF;">
            <h2 class="text-3xl font-bold text-purple-800 mb-4" data-key="activitiesTitle">üìù Our Footstep 1 Activities!</h2>
            <p class="text-lg text-purple-700 text-center mb-6" data-key="activitiesSubtitle">Here's what we'll do in Footstep 1:</p>
            <ul class="space-y-4 text-lg md:text-xl" style="list-style: none; padding-left: 0;">
                <li class="activity-li">
                    <div class="activity-li-content">
                        <span class="text-2xl">‚úèÔ∏è</span>
                        <span data-key="activity1">Write about yourself and what you enjoy doing</span>
                    </div>
                </li>
                <li class="activity-li">
                    <div class="activity-li-content">
                        <span class="text-2xl">ü§ñ</span>
                        <span data-key="activity2">Let's use AI to create our class avatars</span>
                    </div>
                </li>
                <li class="activity-li">
                    <div class="activity-li-content">
                        <span class="text-2xl">ü§ù</span>
                        <span data-key="activity3">Read posts from other students and make new friends</span>
                    </div>
                </li>
            </ul>
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </section>

        <!-- Your First Mission Card -->
        <section class="adventure-card" style="background-color: #EBF8FF; border-color: #90CDF4;">
            <h2 class="text-3xl font-bold text-sky-800 mb-4" data-key="missionTitle">üöÄ Your First Mission!</h2>
            
            <!-- Introduce Yourself -->
            <label for="introduction" class="block text-xl font-semibold text-sky-700 mb-2" data-key="mission1Label">1. Introduce yourself to your walking partners!</label>
            <p class="text-md text-sky-600 mb-4" data-key="mission1Desc">Write a little bit about yourself in the box below. What do you like to do for fun?</p>
            
            <!-- Textarea with Microphone Button -->
            <div class="textarea-container">
                <textarea id="introduction" rows="5" class="w-full p-4 border-2 border-sky-300 rounded-xl text-lg text-gray-800" data-key-placeholder="mission1Placeholder" placeholder="My name is... and I love to play..."></textarea>
                <button id="mic-button" class="stt-button" onclick="startSpeechRecognition()">
                    <!-- Microphone Icon SVG -->
                    <svg class="stt-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2l-.01 6.2c0 .66-.53 1.2-1.19 1.2s-1.2-.54-1.2-1.2V4.9zm6.5 6.1c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"></path>
                    </svg>
                </button>
            </div>
            <p id="mic-status" class="text-sm text-sky-600 mt-2 h-4"></p> <!-- Status message area -->
            
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </section>

        <!-- Footer -->
        <footer class="adventure-card text-center" style="background-color: #F3E8FF; border-color: #DDD6FE;">
            <p class="text-xl font-bold text-purple-800" data-key="footerText">You're all set for Footstep 1. Great job, explorers!</p>
            <button class="tts-button" onclick="speakCard(this)">
                <!-- Updated Speaker Icon SVG -->
                <svg class="tts-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M5 9v6h4l5 5V4L9 9H5zm11.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                </svg>
            </button>
        </footer>
    </div>

    <script>
        // --- Translations Data ---
        const translations = {
            'en': {
                title: "Footstep 1: Let's Go!",
                subtitle: "Let's start our learning adventure together!",
                whatIsTitle: "ü§î What is Footstep 1?",
                whatIsBody: "In Footstep 1, we start our amazing journey! We learn about Paul Salopek, a journalist who is walking around the whole world! We introduce ourselves, choose a special avatar, and start talking with other students about this incredible walking adventure!",
                whyTitle: "üéØ Why is Footstep 1 Important?",
                whyBody: "Footstep 1 helps us start our learning journey together! We get to know Paul Salopek and his amazing walk around the world. We also get to know each other by sharing about ourselves and choosing avatars. This helps us become walking partners who will learn and explore together!",
                meetPaulTitle: "üëã Meet Paul Salopek!",
                meetPaulBody: "Paul is an explorer (like a journalist!) who is on a super long walk around the world, following the path of the first humans. He is walking to listen to stories from all different kinds of people.",
                paulLink1: "Listen to Paul's welcome message from his journey",
                paulLink2: "Watch a video about why Paul is walking around the world",
                activitiesTitle: "üìù Our Footstep 1 Activities!",
                activitiesSubtitle: "Here's what we'll do in Footstep 1:",
                activity1: "Write about yourself and what you enjoy doing",
                activity2: "Let's use AI to create our class avatars",
                activity3: "Read posts from other students and make new friends",
                missionTitle: "üöÄ Your First Mission!",
                mission1Label: "1. Introduce yourself to your walking partners!",
                mission1Desc: "Write a little bit about yourself in the box below. What do you like to do for fun?",
                mission1Placeholder: "My name is... and I love to play...",
                footerText: "You're all set for Footstep 1. Great job, explorers!",
                micListening: "Listening... speak now!",
                micError: "Sorry, I couldn't hear. Please try again."
            },
            'fr': {
                title: "√âtape 1 : C'est parti !",
                subtitle: "Commen√ßons notre aventure d'apprentissage ensemble !",
                whatIsTitle: "ü§î C'est quoi l'√âtape 1 ?",
                whatIsBody: "√Ä l'√âtape 1, nous commen√ßons notre incroyable voyage ! Nous d√©couvrons Paul Salopek, un journaliste qui fait le tour du monde √† pied ! Nous nous pr√©sentons, choisissons un avatar sp√©cial et commen√ßons √† parler avec d'autres √©tudiants de cette incroyable aventure de marche !",
                whyTitle: "üéØ Pourquoi l'√âtape 1 est-elle importante ?",
                whyBody: "L'√âtape 1 nous aide √† commencer notre parcours d'apprentissage ensemble ! Nous apprenons √† conna√Ætre Paul Salopek et son incroyable marche autour du monde. Nous apprenons aussi √† nous conna√Ætre en partageant des informations sur nous-m√™mes et en choisissant des avatars. Cela nous aide √† devenir des partenaires de marche qui apprendront et exploreront ensemble !",
                meetPaulTitle: "üëã Rencontrez Paul Salopek !",
                meetPaulBody: "Paul est un explorateur (comme un journaliste !) qui effectue une tr√®s longue marche autour du monde, en suivant le chemin des premiers humains. Il marche pour √©couter les histoires de toutes sortes de gens.",
                paulLink1: "√âcoutez le message de bienvenue de Paul depuis son voyage",
                paulLink2: "Regardez une vid√©o sur pourquoi Paul fait le tour du monde √† pied",
                activitiesTitle: "üìù Nos activit√©s de l'√âtape 1 !",
                activitiesSubtitle: "Voici ce que nous ferons √† l'√âtape 1 :",
                activity1: "√âcrire sur vous-m√™me et ce que vous aimez faire",
                activity2: "Utilisons l'IA pour cr√©er nos avatars de classe",
                activity3: "Lire les messages des autres √©tudiants et se faire de nouveaux amis",
                missionTitle: "üöÄ Votre premi√®re mission !",
                mission1Label: "1. Pr√©sentez-vous √† vos partenaires de marche !",
                mission1Desc: "√âcrivez un peu sur vous dans la case ci-dessous. Qu'aimez-vous faire pour vous amuser ?",
                mission1Placeholder: "Je m'appelle... et j'adore jouer...",
                footerText: "Vous √™tes pr√™ts pour l'√âtape 1. Bravo, les explorateurs !",
                micListening: "J'√©coute... parlez maintenant !",
                micError: "D√©sol√©, je n'ai pas pu entendre. Veuillez r√©essayer."
            },
            'ja': {
                title: "„Çπ„ÉÜ„ÉÉ„Éó1Ôºö„Åï„ÅÇ„ÄÅË°å„Åì„ÅÜÔºÅ",
                subtitle: "‰∏ÄÁ∑í„Å´Â≠¶„Å≥„ÅÆÂÜíÈô∫„ÇíÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜÔºÅ",
                whatIsTitle: "ü§î „Çπ„ÉÜ„ÉÉ„Éó1„Å£„Å¶„Å™„Å´Ôºü",
                whatIsBody: "„Çπ„ÉÜ„ÉÉ„Éó1„Åß„ÅØ„ÄÅÁßÅ„Åü„Å°„ÅÆÁ¥†Êô¥„Çâ„Åó„ÅÑÊóÖ„ÅåÂßã„Åæ„Çä„Åæ„ÅôÔºÅ‰∏ñÁïå‰∏≠„ÇíÊ≠©„ÅÑ„Å¶„ÅÑ„Çã„Ç∏„É£„Éº„Éä„É™„Çπ„Éà„ÄÅ„Éù„Éº„É´„Éª„Çµ„É≠„Éö„ÉÉ„ÇØ„Åï„Çì„Å´„Å§„ÅÑ„Å¶Â≠¶„Å≥„Åæ„Åô„ÄÇËá™Â∑±Á¥π‰ªã„Çí„Åó„Åü„Çä„ÄÅÁâπÂà•„Å™„Ç¢„Éê„Çø„Éº„ÇíÈÅ∏„Çì„Å†„Çä„ÄÅ„Åì„ÅÆ‰ø°„Åò„Çâ„Çå„Å™„ÅÑ„Çà„ÅÜ„Å™ÂÜíÈô∫„Å´„Å§„ÅÑ„Å¶‰ªñ„ÅÆÁîüÂæí„Å®Ë©±„ÅóÂßã„ÇÅ„Åü„Çä„Åó„Åæ„ÅôÔºÅ",
                whyTitle: "üéØ „Å™„Åú„Çπ„ÉÜ„ÉÉ„Éó1„ÅØÈáçË¶Å„Å™„ÅÆÔºü",
                whyBody: "„Çπ„ÉÜ„ÉÉ„Éó1„ÅØ„ÄÅÁßÅ„Åü„Å°„Åå‰∏ÄÁ∑í„Å´Â≠¶„Å∂ÊóÖ„ÇíÂßã„ÇÅ„Çã„ÅÆ„Å´ÂΩπÁ´ã„Å°„Åæ„ÅôÔºÅ„Éù„Éº„É´„Éª„Çµ„É≠„Éö„ÉÉ„ÇØ„Åï„Çì„Å®„ÄÅÂΩº„ÅÆÁ¥†Êô¥„Çâ„Åó„ÅÑ‰∏ñÁïå‰∏ÄÂë®„ÅÆÂæíÊ≠©ÊóÖË°å„Å´„Å§„ÅÑ„Å¶Áü•„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅËá™ÂàÜËá™Ë∫´„Å´„Å§„ÅÑ„Å¶ÂÖ±Êúâ„Åó„Åü„Çä„ÄÅ„Ç¢„Éê„Çø„Éº„ÇíÈÅ∏„Çì„Å†„Çä„Åô„Çã„Åì„Å®„Åß„Åä‰∫í„ÅÑ„ÇíÁü•„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅÁßÅ„Åü„Å°„ÅØ‰∏ÄÁ∑í„Å´Â≠¶„Å≥„ÄÅÊé¢Ê§ú„Åô„Çã„Äå„Ç¶„Ç©„ÉºÌÇπ„Éª„Éë„Éº„Éà„Éä„Éº„Äç„Å´„Å™„Çã„ÅÆ„Åß„ÅôÔºÅ",
                meetPaulTitle: "üëã „Éù„Éº„É´„Éª„Çµ„É≠„Éö„ÉÉ„ÇØ„Åï„Çì„ÇíÁ¥π‰ªã„Åó„Åæ„ÅôÔºÅ",
                meetPaulBody: "„Éù„Éº„É´„Åï„Çì„ÅØÊé¢Ê§úÂÆ∂Ôºà„Ç∏„É£„Éº„Éä„É™„Çπ„Éà„ÅÆ„Çà„ÅÜ„Å™„ÇÇ„ÅÆ„Åß„ÅôÔºÅÔºâ„Åß„ÄÅÊúÄÂàù„ÅÆ‰∫∫È°û„ÅÆÈÅì„Çí„Åü„Å©„Å£„Å¶‰∏ñÁïå‰∏≠„Çí„Å®„Å¶„ÇÇÈï∑„ÅèÊ≠©„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇÂΩº„ÅØ„Åï„Åæ„Åñ„Åæ„Å™Á®ÆÈ°û„ÅÆ‰∫∫„ÄÖ„Åã„ÇâË©±„ÇíËÅû„Åè„Åü„ÇÅ„Å´Ê≠©„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
                paulLink1: "„Éù„Éº„É´„Åï„Çì„ÅÆÊóÖ„Åã„Çâ„ÅÆ„Ç¶„Çß„É´„Ç´„É†„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËÅû„Åè",
                paulLink2: "„Éù„Éº„É´„Åï„Çì„Åå„Å™„Åú‰∏ñÁïå‰∏≠„ÇíÊ≠©„ÅÑ„Å¶„ÅÑ„Çã„ÅÆ„Åã„ÄÅ„Éì„Éá„Ç™„ÇíË¶ã„Çã",
                activitiesTitle: "üìù „Çπ„ÉÜ„ÉÉ„Éó1„ÅÆÊ¥ªÂãïÔºÅ",
                activitiesSubtitle: "„Çπ„ÉÜ„ÉÉ„Éó1„ÅßÁßÅ„Åü„Å°„Åå„Åô„Çã„Åì„Å®Ôºö",
                activity1: "Ëá™ÂàÜËá™Ë∫´„Å®Ê•Ω„Åó„Çì„Åß„ÅÑ„Çã„Åì„Å®„Å´„Å§„ÅÑ„Å¶Êõ∏„Åè",
                activity2: "AI„Çí‰Ωø„Å£„Å¶„ÇØ„É©„Çπ„ÅÆ„Ç¢„Éê„Çø„Éº„Çí‰Ωú„Çç„ÅÜ",
                activity3: "‰ªñ„ÅÆÁîüÂæí„ÅÆÊäïÁ®ø„ÇíË™≠„Çì„Åß„ÄÅÊñ∞„Åó„ÅÑÂèãÈÅî„Çí‰Ωú„Çã",
                missionTitle: "üöÄ ÊúÄÂàù„ÅÆ„Éü„ÉÉ„Ç∑„Éß„É≥ÔºÅ",
                mission1Label: "1. „Ç¶„Ç©„Éº„Ç≠„É≥„Ç∞„Éª„Éë„Éº„Éà„Éä„Éº„Å´Ëá™Â∑±Á¥π‰ªã„Åó„Çà„ÅÜÔºÅ",
                mission1Desc: "‰∏ã„ÅÆ„Éú„ÉÉ„ÇØ„Çπ„Å´Ëá™ÂàÜËá™Ë∫´„Å´„Å§„ÅÑ„Å¶Â∞ë„ÅóÊõ∏„ÅÑ„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ‰Ωï„Çí„Åó„Å¶Ê•Ω„Åó„Çì„Åß„ÅÑ„Åæ„Åô„ÅãÔºü",
                mission1Placeholder: "ÁßÅ„ÅÆÂêçÂâç„ÅØ...„Åß„Åô„ÄÇË∂£Âë≥„ÅØ...„Åß„Åô„ÄÇ",
                footerText: "„Çπ„ÉÜ„ÉÉ„Éó1„ÅÆÊ∫ñÂÇô„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ„Çà„Åè„Åß„Åç„Åæ„Åó„Åü„ÄÅÊé¢Ê§úÂÆ∂„ÅÆ„Åø„Å™„Åï„ÇìÔºÅ",
                micListening: "ËÅû„ÅÑ„Å¶„ÅÑ„Åæ„Åô...„Å©„ÅÜ„ÅûÔºÅ",
                micError: "„Åô„Åø„Åæ„Åõ„Çì„ÄÅËÅû„Åì„Åà„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ"
            },
            'ko': {
                title: "Ï≤´ Î≤àÏß∏ Î∞úÍ±∏Ïùå: Ï∂úÎ∞ú!",
                subtitle: "Ïö∞Î¶¨Ïùò ÌïôÏäµ Î™®ÌóòÏùÑ Ìï®Íªò ÏãúÏûëÌï¥Ïöî!",
                whatIsTitle: "ü§î Ï≤´ Î≤àÏß∏ Î∞úÍ±∏ÏùåÏù¥ Î≠îÍ∞ÄÏöî?",
                whatIsBody: "Ï≤´ Î≤àÏß∏ Î∞úÍ±∏ÏùåÏóêÏÑú, Ïö∞Î¶¨Îäî ÎÜÄÎùºÏö¥ Ïó¨Ï†ïÏùÑ ÏãúÏûëÌï©ÎãàÎã§! Ï†Ñ ÏÑ∏Í≥ÑÎ•º Í±∑Í≥† ÏûàÎäî Ï†ÄÎÑêÎ¶¨Ïä§Ìä∏, Ìè¥ ÏÇ¥Î°úÌéôÏóê ÎåÄÌï¥ Î∞∞ÏõåÏöî! Ïö∞Î¶¨Î•º ÏÜåÍ∞úÌïòÍ≥†, ÌäπÎ≥ÑÌïú ÏïÑÎ∞îÌÉÄÎ•º Í≥†Î•¥Í≥†, Ïù¥ Î©ãÏßÑ Í±∑Í∏∞ Î™®ÌóòÏóê ÎåÄÌï¥ Îã§Î•∏ ÌïôÏÉùÎì§Í≥º Ïù¥ÏïºÍ∏∞ÌïòÍ∏∞ ÏãúÏûëÌï† Í±∞ÏòàÏöî!",
                whyTitle: "üéØ Ïôú Ï≤´ Î≤àÏß∏ Î∞úÍ±∏ÏùåÏù¥ Ï§ëÏöîÌï†ÍπåÏöî?",
                whyBody: "Ï≤´ Î≤àÏß∏ Î∞úÍ±∏ÏùåÏùÄ Ïö∞Î¶¨Í∞Ä Ìï®Íªò Î∞∞Ïö∞Îäî Ïó¨Ï†ïÏùÑ ÏãúÏûëÌïòÎèÑÎ°ù ÎèÑÏôÄÏ§òÏöî! Ìè¥ ÏÇ¥Î°úÌéôÍ≥º Í∑∏Í∞Ä Ï†Ñ ÏÑ∏Í≥ÑÎ•º Í±∑Îäî ÎÜÄÎùºÏö¥ Ïó¨Ï†ïÏóê ÎåÄÌï¥ ÏïåÍ≤å ÎêòÏ£†. Îòê Ïö∞Î¶¨ ÏûêÏã†Ïóê ÎåÄÌï¥ Ïù¥ÏïºÍ∏∞ÌïòÍ≥† ÏïÑÎ∞îÌÉÄÎ•º Í≥†Î•¥Î©¥ÏÑú ÏÑúÎ°úÎ•º ÏïåÏïÑÍ∞ÄÍ≤å ÎèºÏöî. Ïù¥Î†áÍ≤å Ìï¥ÏÑú Ïö∞Î¶¨Îäî Ìï®Íªò Î∞∞Ïö∞Í≥† ÌÉêÌóòÌïòÎäî 'Í±∑Í∏∞ ÌååÌä∏ÎÑà'Í∞Ä Îê† Ïàò ÏûàÏñ¥Ïöî!",
                meetPaulTitle: "üëã Ìè¥ ÏÇ¥Î°úÌéôÏùÑ ÎßåÎÇòÎ≥¥ÏÑ∏Ïöî!",
                meetPaulBody: "Ìè¥ÏùÄ ÏµúÏ¥àÏùò Ïù∏Î•òÍ∞Ä Í±∏ÏóàÎçò Í∏∏ÏùÑ Îî∞Îùº ÏïÑÏ£º Ïò§Îû´ÎèôÏïà Ï†Ñ ÏÑ∏Í≥ÑÎ•º Í±∑Í≥† ÏûàÎäî ÌÉêÌóòÍ∞Ä(Ï†ÄÎÑêÎ¶¨Ïä§Ìä∏ Í∞ôÏùÄ!)ÏòàÏöî. Í∑∏Îäî Îã§ÏñëÌïú ÏÇ¨ÎûåÎì§Ïùò Ïù¥ÏïºÍ∏∞Î•º Îì£Í∏∞ ÏúÑÌï¥ Í±∑Í≥† ÏûàÎãµÎãàÎã§.",
                paulLink1: "Ìè¥Ïù¥ Ïó¨Ï†ï Ï§ëÏóê Î≥¥ÎÇ∏ ÌôòÏòÅ Î©îÏãúÏßÄ Îì£Í∏∞",
                paulLink2: "Ìè¥Ïù¥ Ïôú Ï†Ñ ÏÑ∏Í≥ÑÎ•º Í±∑Í≥† ÏûàÎäîÏßÄ ÎπÑÎîîÏò§ Î≥¥Í∏∞",
                activitiesTitle: "üìù Ïö∞Î¶¨Ïùò Ï≤´ Î≤àÏß∏ Î∞úÍ±∏Ïùå ÌôúÎèô!",
                activitiesSubtitle: "Ï≤´ Î≤àÏß∏ Î∞úÍ±∏ÏùåÏóêÏÑú Ïö∞Î¶¨Í∞Ä Ìï† ÏùºÎì§Ïù¥ÏóêÏöî:",
                activity1: "Ïó¨Îü¨Î∂ÑÏù¥ Ï¶êÍ≤® ÌïòÎäî ÏùºÍ≥º ÏûêÏã†Ïóê ÎåÄÌï¥ Í∏ÄÏì∞Í∏∞",
                activity2: "Ïù∏Í≥µÏßÄBÏßÄÎä•ÏúºÎ°ú Ïö∞Î¶¨ Î∞ò ÏïÑÎ∞îÌÉÄ ÎßåÎì§Í∏∞",
                activity3: "Îã§Î•∏ ÌïôÏÉùÎì§Ïù¥ Ïì¥ Í∏ÄÏùÑ ÏùΩÍ≥† ÏÉà ÏπúÍµ¨ ÏÇ¨Í∑ÄÍ∏∞",
                missionTitle: "üöÄ Ïó¨Îü¨Î∂ÑÏùò Ï≤´ Î≤àÏß∏ ÎØ∏ÏÖò!",
                mission1Label: "1. 'Í±∑Í∏∞ ÌååÌä∏ÎÑà'Îì§ÏóêÍ≤å Ïó¨Îü¨Î∂ÑÏùÑ ÏÜåÍ∞úÌïòÏÑ∏Ïöî!",
                mission1Desc: "ÏïÑÎûò ÏÉÅÏûêÏóê Ïó¨Îü¨Î∂ÑÏóê ÎåÄÌï¥ Ï°∞Í∏à Ïç®Î≥¥ÏÑ∏Ïöî. Ïû¨ÎØ∏Î°ú Î¨¥ÏóáÏùÑ ÌïòÎäî Í≤ÉÏùÑ Ï¢ãÏïÑÌïòÎÇòÏöî?",
                mission1Placeholder: "Ï†ú Ïù¥Î¶ÑÏùÄ... Ïù¥Í≥†, Ï†ÄÎäî ...ÌïòÎäî Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥Ïöî.",
                footerText: "Ï≤´ Î≤àÏß∏ Î∞úÍ±∏ÏùåÏùÑ ÏúÑÌïú Ï§ÄÎπÑÍ∞Ä ÎÅùÎÇ¨Ïñ¥Ïöî. ÏûòÌñàÏñ¥Ïöî, ÌÉêÌóòÍ∞ÄÎì§!",
                micListening: "Îì£Í≥† ÏûàÏñ¥Ïöî... ÎßêÏîÄÌïòÏÑ∏Ïöî!",
                micError: "Ï£ÑÏÜ°Ìï¥Ïöî, Îì£ÏßÄ Î™ªÌñàÏñ¥Ïöî. Îã§Ïãú ÏãúÎèÑÌï¥ Ï£ºÏÑ∏Ïöî."
            }
        };
        
        // --- Language Switcher Function ---
        let currentLang = 'en';
        
        function changeLanguage(lang) {
            currentLang = lang;
            // Stop any playing speech (ONLY IF AVAILABLE)
            if (window.speechSynthesis) {
                window.speechSynthesis.cancel();
            }
            
            // Translate all elements with data-key
            document.querySelectorAll('[data-key]').forEach(elem => {
                const key = elem.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    elem.textContent = translations[lang][key];
                }
            });
            
            // Translate all elements with data-key-placeholder
            document.querySelectorAll('[data-key-placeholder]').forEach(elem => {
                const key = elem.getAttribute('data-key-placeholder');
                if (translations[lang] && translations[lang][key]) {
                    elem.placeholder = translations[lang][key];
                }
            });

            // Translate mic status message if it's not empty
            const micStatus = document.getElementById('mic-status');
            const currentStatusKey = micStatus.dataset.key;
            if (currentStatusKey && translations[lang][currentStatusKey]) {
                micStatus.textContent = translations[lang][currentStatusKey];
            }
            
            // Set HTML lang attribute for accessibility
            document.documentElement.lang = lang;
        }

        // --- Text-to-Speech (TTS) Function ---
        function speakCard(button) {
            // Check if TTS is available at all
            if (!window.speechSynthesis) {
                console.warn("Speech Synthesis is not supported or blocked in this environment.");
                if (button) button.style.display = 'none'; 
                return;
            }

            // Find the parent adventure-card
            const card = button.closest('.adventure-card');
            if (!card) return;

            // Gather all text elements to be read
            const textToSpeak = [];
            card.querySelectorAll('h1, h2, h3, p, label, span, li').forEach(elem => {
                if (!elem.closest('a') && !elem.closest('button') && !elem.closest('select')) {
                     const text = elem.textContent || elem.innerText;
                     if(text) textToSpeak.push(text.trim());
                }
            });
            
            const fullText = textToSpeak.join('. ');

            if (fullText) {
                // Stop any previous speech
                window.speechSynthesis.cancel();
                // Regex to remove most emojis and symbols
                const emojiRegex = /[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F900}-\u{1F9FF}]/gu;
                const cleanText = fullText.replace(emojiRegex, '');
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = currentLang;
                const voices = window.speechSynthesis.getVoices();
                let selectedVoice = voices.find(voice => voice.lang === currentLang);
                
                if (!selectedVoice) {
                    selectedVoice = voices.find(voice => voice.lang.startsWith(currentLang));
                }

                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                }
                
                window.speechSynthesis.speak(utterance);
            }
        }

        // Ensure voices are loaded for the TTS function (ONLY IF AVAILABLE)
        if (window.speechSynthesis) {
            window.speechSynthesis.onvoiceschanged = () => {
                // console.log("Voices loaded"); // No need to log this repeatedly
            };
        }

        // --- Speech-to-Text (STT) Function ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;

        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            const micButton = document.getElementById('mic-button');
            const introductionBox = document.getElementById('introduction');
            const micStatus = document.getElementById('mic-status');

            recognition.continuous = false; // Stop after one phrase
            recognition.interimResults = false; // Get final results only
            
            recognition.onstart = () => {
                micButton.classList.add('is-listening');
                micStatus.textContent = translations[currentLang].micListening;
                micStatus.dataset.key = 'micListening'; // Store key for re-translation
            };

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                // Append the new text
                introductionBox.value += (introductionBox.value.length > 0 ? ' ' : '') + transcript + '.';
            };

            recognition.onerror = (event) => {
                console.error("Speech recognition error:", event.error);
                micStatus.textContent = translations[currentLang].micError;
                micStatus.dataset.key = 'micError'; // Store key for re-translation
            };

            recognition.onend = () => {
                micButton.classList.remove('is-listening');
                // Clear status after a moment
                setTimeout(() => {
                    micStatus.textContent = '';
                    micStatus.dataset.key = '';
                }, 2000);
            };

            window.startSpeechRecognition = () => {
                // Set the language for recognition based on the current page lang
                recognition.lang = currentLang;
                try {
                    recognition.start();
                } catch(e) {
                    console.error("Error starting speech recognition:", e);
                    micStatus.textContent = translations[currentLang].micError;
                    micStatus.dataset.key = 'micError';
                }
            };

        } else {
            // If STT is not supported, hide the mic button
            console.warn("Speech Recognition is not supported in this browser.");
            const micButton = document.getElementById('mic-button');
            if (micButton) micButton.style.display = 'none';
        }

        // Initial language set on load
        changeLanguage(currentLang);

    </script>
</body>
</html>

