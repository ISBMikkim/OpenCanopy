<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1st Grade Talking Toolkit</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Nunito font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Nunito', 'sans-serif'],
                    },
                    boxShadow: {
                        'DEFAULT': '0 4px 12px 0 rgba(0, 0, 0, 0.07)',
                        'lg': '0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>

    <style>
        /* iPad iframe ìŠ¤í¬ë¡¤ ìš°íšŒ */
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;                 /* iframe ë†’ì´ë§Œí¼ ê³ ì • */
            overflow: hidden;              /* ë°”ê¹¥ìª½ ìŠ¤í¬ë¡¤ ë§‰ê¸° */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ì‹¤ì œë¡œ ìŠ¤í¬ë¡¤í•  ì˜ì—­ */
        .ios-scroll-wrapper {
            position: relative;
            height: 100%;
            width: 100%;
            overflow-y: auto;              /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš© */
            -webkit-overflow-scrolling: touch; /* iOS ê´€ì„± ìŠ¤í¬ë¡¤ */
        }
    </style>
</head>

<body class="font-sans bg-sky-50 text-gray-800">
<div class="ios-scroll-wrapper">

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container mx-auto max-w-4xl p-6 sm:p-10">

        <!-- ì–¸ì–´ ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
        <div class="w-full flex justify-end mb-4">
            <label for="language-select" class="sr-only">Select Language</label>
            <select id="language-select" class="rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                <option value="en">English</option>
                <option value="ko">í•œêµ­ì–´ (Korean)</option>
                <option value="ja">æ—¥æœ¬èª (Japanese)</option>
                <option value="fr">FranÃ§ais (French)</option>
            </select>
        </div>

        <!-- í—¤ë” ì„¹ì…˜ -->
        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-5xl font-black text-blue-600 mb-4" data-translate-key="header.title">
                Talk Together!
            </h1>
            <p class="text-lg sm:text-xl text-gray-700 max-w-2xl mx-auto" data-translate-key="header.subtitle">
                Welcome to our <strong class="font-bold text-blue-600">Talking Toolkit</strong>! This toolbox helps us be great listeners, share our big ideas, and ask kind questions.
            </p>
        </header>

        <!-- 5ê°€ì§€ í•µì‹¬ ë„êµ¬ ì„¹ì…˜ -->
        <section>
            <h2 class="text-3xl sm:text-4xl font-bold text-teal-600 text-center mb-8" data-translate-key="tools.title">
                Our 5 Super Talking Tools!
            </h2>

            <!-- ë„êµ¬ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                <!-- ë„êµ¬ 1: Notice -->
                <div data-content-id="tool1" class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 flex items-start space-x-5 transition-transform hover:scale-[1.02] relative">
                    <span class="text-5xl sm:text-6xl mt-1">ğŸ‘€</span>
                    <div>
                        <h3 class="text-2xl font-bold text-blue-700 mb-2" data-translate-key="tool1.title">Notice (Say What You See)</h3>
                        <p class="text-lg text-gray-700 mb-3" data-translate-key="tool1.desc"><strong class="font-bold text-gray-900">What to say:</strong> Share the very <em>first</em> thing you see in a friend's picture, story, or project.</p>
                        <p class="text-lg text-gray-900 bg-blue-50 rounded-lg p-4 font-medium" data-translate-key="tool1.ex"><strong class="font-bold">Example:</strong> "I noticed the bright red bird in your drawing!"</p>
                    </div>
                    <!-- ìŠ¤í”¼ì»¤ ë²„íŠ¼ -->
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>

                <!-- ë„êµ¬ 2: Appreciate -->
                <div data-content-id="tool2" class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 flex items-start space-x-5 transition-transform hover:scale-[1.02] relative">
                    <span class="text-5xl sm:text-6xl mt-1">ğŸ‘</span>
                    <div>
                        <h3 class="text-2xl font-bold text-pink-600 mb-2" data-translate-key="tool2.title">Appreciate (Say Something Nice)</h3>
                        <p class="text-lg text-gray-700 mb-3" data-translate-key="tool2.desc"><strong class="font-bold text-gray-900">What to say:</strong> Share what you liked best or thought was super cool about your friend's idea.</p>
                        <p class="text-lg text-gray-900 bg-pink-50 rounded-lg p-4 font-medium" data-translate-key="tool2.ex"><strong class="font-bold">Example:</strong> "Wow, I love the way you built the tall tower with the blocks!"</p>
                    </div>
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>
                
                <!-- ë„êµ¬ 3: Connect -->
                <div data-content-id="tool3" class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 flex items-start space-x-5 transition-transform hover:scale-[1.02] relative">
                    <span class="text-5xl sm:text-6xl mt-1">ğŸ¤</span>
                    <div>
                        <h3 class="text-2xl font-bold text-green-600 mb-2" data-translate-key="tool3.title">Connect (Find What's the Same)</h3>
                        <p class="text-lg text-gray-700 mb-3" data-translate-key="tool3.desc"><strong class="font-bold text-gray-900">What to say:</strong> Share how your friend's story is like something in <em>your</em> life.</p>
                        <p class="text-lg text-gray-900 bg-green-50 rounded-lg p-4 font-medium" data-translate-key="tool3.ex"><strong class="font-bold">Example:</strong> "You have a little sister? I have a little sister, too! That's a fun connection."</p>
                    </div>
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>

                <!-- ë„êµ¬ 4: Probe -->
                <div data-content-id="tool4" class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 flex items-start space-x-5 transition-transform hover:scale-[1.02] relative">
                    <span class="text-5xl sm:text-6xl mt-1">â“</span>
                    <div>
                        <h3 class="text-2xl font-bold text-purple-600 mb-2" data-translate-key="tool4.title">Probe (Ask to Learn More)</h3>
                        <p class="text-lg text-gray-700 mb-3" data-translate-key="tool4.desc"><strong class="font-bold text-gray-900">What to say:</strong> Ask a kind question because you are curious and want to know more. You can start with:</p>
                        <ul class="list-disc list-inside text-lg text-purple-900 bg-purple-50 rounded-lg p-4 space-y-1 font-medium" data-translate-key="tool4.list">
                            <li>"Tell me more about..."</li>
                            <li>"I wonder why..."</li>
                            <li>"Help me understand..."</li>
                        </ul>
                    </div>
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>

                <!-- ë„êµ¬ 5: Extend -->
                <div data-content-id="tool5" class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 flex items-start space-x-5 transition-transform hover:scale-[1.02] relative">
                    <span class="text-5xl sm:text-6xl mt-1">ğŸ’¡</span>
                    <div>
                        <h3 class="text-2xl font-bold text-orange-600 mb-2" data-translate-key="tool5.title">Extend (Share a New Idea)</h3>
                        <p class="text-lg text-gray-700 mb-3" data-translate-key="tool5.desc"><strong class="font-bold text-gray-900">What to say:</strong> Share a new thought that <em>popped</em> into your head after listening to your friend.</p>
                        <p class="text-lg text-gray-900 bg-orange-50 rounded-lg p-4 font-medium" data-translate-key="tool5.ex"><strong class="font-bold">Example:</strong> "Listening to your story made me think about my own neighborhood in a new way!"</p>
                    </div>
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>

            </div>
        </section>

        <!-- ì•ˆì „ ê·œì¹™ ì„¹ì…˜ -->
        <section class="mt-16">
            <h2 class="text-3xl sm:text-4xl font-bold text-red-600 text-center mb-8" data-translate-key="rules.title">
                Our Super Safe Talking Rules
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- ê·œì¹™ 1 -->
                <div data-content-id="rule1" class="bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-6 sm:p-8 flex items-start space-x-5 relative">
                    <span class="text-5xl sm:text-6xl mt-1">ğŸ¤</span>
                    <div>
                        <h3 class="text-2xl font-bold text-yellow-800 mb-2" data-translate-key="rule1.title">Talk with Your Voice!</h3>
                        <p class="text-lg text-yellow-900" data-translate-key="rule1.desc">Typing is hard sometimes! It is **always okay** to use the voice recorder (the microphone button) to share your thoughts.</p>
                    </div>
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>
                
                <!-- ê·œì¹™ 2 -->
                <div data-content-id="rule2" class="bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-6 sm:p-8 flex items-start space-x-5 relative">
                    <span class="text-5xl sm:text-6xl mt-1">â¤ï¸</span>
                    <div>
                        <h3 class="text-2xl font-bold text-yellow-800 mb-2" data-translate-key="rule2.title">Be Kind and Respectful</h3>
                        <p class="text-lg text-yellow-900" data-translate-key="rule2.desc">We are always talking to one of our real friends. We **never** make fun of a friend's family, home, or feelings. We are a team!</p>
                    </div>
                    <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- kind keys -->
        <section class="mt-16 text-center">
            <div data-content-id="keys" class="bg-gradient-to-br from-yellow-300 to-orange-400 text-white rounded-2xl shadow-xl p-8 sm:p-12 relative">
                <span class="text-7xl block mb-4">ğŸ”‘</span>
                <h2 class="text-3xl sm:text-4xl font-bold mb-4" data-translate-key="keys.title">
                    A Way to Remember: The Kind Keys
                </h2>
                <p class="text-lg sm:text-xl font-medium max-w-xl mx-auto" data-translate-key="keys.p">
                    Think of this toolkit as a set of <strong>"Kind Keys"</strong> to gently unlock a friend's story. We use our tools to give a polite *knock-knock* and ask kindly, "Can I learn more?"
                </p>
                <button onclick="speakText(this)" title="Read aloud" class="absolute bottom-6 right-6 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-300 transition">
                    <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.683 3.92 11 4.146 11 4.586v14.828c0 .44-.317.666-.707.354L5.586 15z"></path></svg>
                </button>
            </div>
        </section>

    </div> <!--/ container -->

</div> <!--/ ios-scroll-wrapper -->
    
<!-- ë²ˆì—­ ë° ìŒì„± ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    // ë²ˆì—­ ë°ì´í„°
    const translations = {
        'en': {
            header: {
                title: "Talk Together!",
                subtitle: "Welcome to our <strong class='font-bold text-blue-600'>Talking Toolkit</strong>! This toolbox helps us be great listeners, share our big ideas, and ask kind questions."
            },
            tools: {
                title: "Our 5 Super Talking Tools!"
            },
            tool1: {
                title: "Notice (Say What You See)",
                desc: "<strong class='font-bold text-gray-900'>What to say:</strong> Share the very <em>first</em> thing you see in a friend's picture, story, or project.",
                ex: "<strong class='font-bold'>Example:</strong> \"I noticed the bright red bird in your drawing!\""
            },
            tool2: {
                title: "Appreciate (Say Something Nice)",
                desc: "<strong class='font-bold text-gray-900'>What to say:</strong> Share what you liked best or thought was super cool about your friend's idea.",
                ex: "<strong class='font-bold'>Example:</strong> \"Wow, I love the way you built the tall tower with the blocks!\""
            },
            tool3: {
                title: "Connect (Find What's the Same)",
                desc: "<strong class='font-bold text-gray-900'>What to say:</strong> Share how your friend's story is like something in <em>your</em> life.",
                ex: "<strong class='font-bold'>Example:</strong> \"You have a little sister? I have a little sister, too! That's a fun connection.\""
            },
            tool4: {
                title: "Probe (Ask to Learn More)",
                desc: "<strong class='font-bold text-gray-900'>What to say:</strong> Ask a kind question because you are curious and want to know more. You can start with:",
                list: "<li>\"Tell me more about...\"</li><li>\"I wonder why...\"</li><li>\"Help me understand...\"</li>"
            },
            tool5: {
                title: "Extend (Share a New Idea)",
                desc: "<strong class='font-bold text-gray-900'>What to say:</strong> Share a new thought that <em>popped</em> into your head after listening to your friend.",
                ex: "<strong class='font-bold'>Example:</strong> \"Listening to your story made me think about my own neighborhood in a new way!\""
            },
            rules: {
                title: "Our Super Safe Talking Rules"
            },
            rule1: {
                title: "Talk with Your Voice!",
                desc: "Typing is hard sometimes! It is **always okay** to use the voice recorder (the microphone button) to share your thoughts."
            },
            rule2: {
                title: "Be Kind and Respectful",
                desc: "We are always talking to one of our real friends. We **never** make fun of a friend's family, home, or feelings. We are a team!"
            },
            keys: {
                title: "A Way to Remember: The Kind Keys",
                p: "Think of this toolkit as a set of <strong>\"Kind Keys\"</strong> to gently unlock a friend's story. We use our tools to give a polite *knock-knock* and ask kindly, \"Can I learn more?\""
            }
        },
        'ko': {
            header: {
                title: "ë‹¤ í•¨ê»˜ ì´ì•¼ê¸°í•´ìš”!",
                subtitle: "<strong class='font-bold text-blue-600'>ì´ì•¼ê¸° ë„êµ¬ ìƒì</strong>ì— ì˜¨ ê²ƒì„ í™˜ì˜í•´ìš”! ì´ ë„êµ¬ ìƒìëŠ” ìš°ë¦¬ê°€ í›Œë¥­í•œ ê²½ì²­ìê°€ ë˜ê³ , ë©‹ì§„ ìƒê°ì„ ë‚˜ëˆ„ë©°, ì¹œì ˆí•œ ì§ˆë¬¸ì„ í•˜ë„ë¡ ë„ì™€ì¤„ ê±°ì˜ˆìš”."
            },
            tools: {
                title: "ìš°ë¦¬ì˜ 5ê°€ì§€ ìŠˆí¼ ì´ì•¼ê¸° ë„êµ¬!"
            },
            tool1: {
                title: "Notice (ë³¸ ê²ƒ ë§í•˜ê¸°)",
                desc: "<strong class='font-bold text-gray-900'>ì´ë ‡ê²Œ ë§í•´ìš”:</strong> ì¹œêµ¬ì˜ ê·¸ë¦¼ì´ë‚˜ ì´ì•¼ê¸°ì—ì„œ <em>ê°€ì¥ ë¨¼ì €</em> ëˆˆì— ëˆ ê²ƒì„ ë§í•´ë³´ì„¸ìš”.",
                ex: "<strong class='font-bold'>ì˜ˆì‹œ:</strong> \"ë„¤ê°€ ê·¸ë¦° ê·¸ë¦¼ì—ì„œ ë°ì€ ë¹¨ê°„ ìƒˆê°€ ê°€ì¥ ë¨¼ì € ë³´ì˜€ì–´!\""
            },
            tool2: {
                title: "Appreciate (ì¹­ì°¬í•˜ê¸°)",
                desc: "<strong class='font-bold text-gray-900'>ì´ë ‡ê²Œ ë§í•´ìš”:</strong> ì¹œêµ¬ì˜ ì•„ì´ë””ì–´ì—ì„œ ê°€ì¥ ì¢‹ì•˜ê±°ë‚˜ ì •ë§ ë©‹ì§€ë‹¤ê³  ìƒê°í•˜ëŠ” ì ì„ ë§í•´ì£¼ì„¸ìš”.",
                ex: "<strong class='font-bold'>ì˜ˆì‹œ:</strong> \"ì™€, ë¸”ë¡ìœ¼ë¡œ ê·¸ë ‡ê²Œ ë†’ì€ íƒ‘ì„ ë§Œë“¤ë‹¤ë‹ˆ ì •ë§ ë©‹ì§€ë‹¤!\""
            },
            tool3: {
                title: "Connect (ì—°ê²°í•˜ê¸°)",
                desc: "<strong class='font-bold text-gray-900'>ì´ë ‡ê²Œ ë§í•´ìš”:</strong> ì¹œêµ¬ì˜ ì´ì•¼ê¸°ê°€ <em>ë‚˜ì˜</em> ì‚¶ê³¼ ì–´ë–»ê²Œ ë¹„ìŠ·í•œì§€ ì´ì•¼ê¸°í•´ ë³´ì„¸ìš”.",
                ex: "<strong class='font-bold'>ì˜ˆì‹œ:</strong> \"ë„ˆë„ ì—¬ë™ìƒì´ ìˆêµ¬ë‚˜! ë‚˜ë„ ì—¬ë™ìƒì´ ìˆëŠ”ë°! ì •ë§ ë°˜ê°€ìš´ ì—°ê²°ì´ì•¼.\""
            },
            tool4: {
                title: "Probe (ì§ˆë¬¸í•˜ê¸°)",
                desc: "<strong class='font-bold text-gray-900'>ì´ë ‡ê²Œ ë§í•´ìš”:</strong> ê¶ê¸ˆí•œ ì ì´ ìˆì–´ì„œ ë” ì•Œê³  ì‹¶ì„ ë•Œ ì¹œì ˆí•˜ê²Œ ì§ˆë¬¸í•´ ë³´ì„¸ìš”. ì´ë ‡ê²Œ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”:",
                list: "<li>\"...ì— ëŒ€í•´ ì¢€ ë” ë§í•´ì¤„ë˜?\"</li><li>\"ì™œ ...ì¸ì§€ ê¶ê¸ˆí•´\"</li><li>\"...ì„ ì´í•´í•˜ëŠ” ê±¸ ë„ì™€ì¤„ë˜?\"</li>"
            },
            tool5: {
                title: "Extend (ìƒˆë¡œìš´ ìƒê° ë”í•˜ê¸°)",
                desc: "<strong class='font-bold text-gray-900'>ì´ë ‡ê²Œ ë§í•´ìš”:</strong> ì¹œêµ¬ì˜ ì´ì•¼ê¸°ë¥¼ ë“£ê³  <em>ë¨¸ë¦¿ì†ì— ë– ì˜¤ë¥¸</em> ìƒˆë¡œìš´ ìƒê°ì„ ë‚˜ëˆ ë³´ì„¸ìš”.",
                ex: "<strong class='font-bold'>ì˜ˆì‹œ:</strong> \"ë„¤ ì´ì•¼ê¸°ë¥¼ ë“¤ìœ¼ë‹ˆ ìš°ë¦¬ ë™ë„¤ë¥¼ ìƒˆë¡œìš´ ëˆˆìœ¼ë¡œ ë³´ê²Œ ë˜ì—ˆì–´!\""
            },
            rules: {
                title: "ìš°ë¦¬ì˜ ìŠˆí¼ ì•ˆì „ ì´ì•¼ê¸° ê·œì¹™"
            },
            rule1: {
                title: "ëª©ì†Œë¦¬ë¡œ ì´ì•¼ê¸°í•´ìš”!",
                desc: "íƒ€ì´í•‘ì€ ê°€ë” ì–´ë ¤ì›Œìš”! ë§ˆì´í¬ ë²„íŠ¼(ë…¹ìŒê¸°)ì„ ì‚¬ìš©í•´ì„œ ì—¬ëŸ¬ë¶„ì˜ ìƒê°ì„ ëª©ì†Œë¦¬ë¡œ ë‚¨ê²¨ë„ **í•­ìƒ ê´œì°®ì•„ìš”**."
            },
            rule2: {
                title: "ì¹œì ˆí•˜ê³  ì¡´ì¤‘í•´ìš”",
                desc: "ìš°ë¦¬ëŠ” í•­ìƒ ì‹¤ì œ ì¹œêµ¬ì™€ ì´ì•¼ê¸°í•˜ê³  ìˆì–´ìš”. ì¹œêµ¬ì˜ ê°€ì¡±, ì§‘, ë˜ëŠ” ê¸°ë¶„ì„ **ì ˆëŒ€** ë†€ë¦¬ì§€ ì•Šì•„ìš”. ìš°ë¦¬ëŠ” í•œ íŒ€ì´ì—ìš”!"
            },
            keys: {
                title: "ê¸°ì–µí•˜ëŠ” ë°©ë²•: ì¹œì ˆí•œ ì—´ì‡ ",
                p: "ì´ ë„êµ¬ ìƒìë¥¼ ì¹œêµ¬ì˜ ë§ˆìŒì„ ì—¬ëŠ” <strong>\"ì¹œì ˆí•œ ì—´ì‡ \"</strong>ë¼ê³  ìƒê°í•˜ì„¸ìš”. ìš°ë¦¬ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í•´ ì˜ˆì˜ ë°”ë¥´ê²Œ *ë˜‘ë˜‘* ë…¸í¬í•˜ê³ , \"ë‚´ê°€ ë” ì•Œì•„ë„ ë ê¹Œ?\"ë¼ê³  ì¹œì ˆí•˜ê²Œ ë¬¼ì–´ë´ìš”."
            }
        },
        'ja': {
            header: {
                title: "ã¿ã‚“ãªã§è©±ãã†ï¼",
                subtitle: "<strong class='font-bold text-blue-600'>ãŠè©±ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ</strong>ã¸ã‚ˆã†ã“ãï¼ã“ã®ãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã¯ã€ç§ãŸã¡ãŒèãä¸Šæ‰‹ã«ãªã‚Šã€ç´ æ™´ã‚‰ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’åˆ†ã‹ã¡åˆã„ã€è¦ªåˆ‡ãªè³ªå•ã‚’ã™ã‚‹ã®ã‚’åŠ©ã‘ã¾ã™ã€‚"
            },
            tools: {
                title: "5ã¤ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ãŠè©±ãƒ„ãƒ¼ãƒ«ï¼"
            },
            tool1: {
                title: "Notice (è¦‹ãŸã“ã¨ã‚’è¨€ã†)",
                desc: "<strong class='font-bold text-gray-900'>ä½•ã‚’è¨€ã†ã‹:</strong> å‹é”ã®å†™çœŸã‚„è©±ã§<em>ä¸€ç•ªæœ€åˆ</em>ã«ç›®ã«ã¤ã„ãŸã“ã¨ã‚’è©±ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
                ex: "<strong class='font-bold'>ä¾‹:</strong> ã€Œã‚ãªãŸã®çµµã«ã‚ã‚‹çœŸã£èµ¤ãªé³¥ãŒç›®ã«å…¥ã£ãŸã‚ˆï¼ã€"
            },
            tool2: {
                title: "Appreciate (ç´ æ•µãªã¨ã“ã‚ã‚’è¨€ã†)",
                desc: "<strong class='font-bold text-gray-900'>ä½•ã‚’è¨€ã†ã‹:</strong> å‹é”ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã§ä¸€ç•ªå¥½ãã ã£ãŸã¨ã“ã‚ã€ã™ã”ã„ã¨æ€ã£ãŸã¨ã“ã‚ã‚’ä¼ãˆã¾ã—ã‚‡ã†ã€‚",
                ex: "<strong class='font-bold'>ä¾‹:</strong> ã€Œã‚ã‚ã€ãƒ–ãƒ­ãƒƒã‚¯ã§é«˜ã„ã‚¿ãƒ¯ãƒ¼ã‚’ä½œã£ãŸã®ãŒã™ã”ã„ã­ï¼ã€"
            },
            tool3: {
                title: "Connect (ä¼¼ã¦ã„ã‚‹ã¨ã“ã‚ã‚’è¦‹ã¤ã‘ã‚‹)",
                desc: "<strong class='font-bold text-gray-900'>ä½•ã‚’è¨€ã†ã‹:</strong> å‹é”ã®è©±ãŒ<em>è‡ªåˆ†ã®</em>ç”Ÿæ´»ã¨ã©ã†ä¼¼ã¦ã„ã‚‹ã‹è©±ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
                ex: "<strong class='font-bold'>ä¾‹:</strong> ã€Œã‚ãªãŸã‚‚å¦¹ã•ã‚“ãŒã„ã‚‹ã®ï¼Ÿç§ã«ã‚‚å¦¹ãŒã„ã‚‹ã‚ˆï¼å¬‰ã—ã„ã¤ãªãŒã‚Šã ã­ã€‚ã€"
            },
            tool4: {
                title: "Probe (ã‚‚ã£ã¨èã)",
                desc: "<strong class='font-bold text-gray-900'>ä½•ã‚’è¨€ã†ã‹:</strong> å¥½å¥‡å¿ƒã‹ã‚‰ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„ã¨æ€ã£ãŸæ™‚ã€è¦ªåˆ‡ãªè³ªå•ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã†å§‹ã‚ã‚‰ã‚Œã¾ã™:",
                list: "<li>ã€Œâ€¦ã«ã¤ã„ã¦ã‚‚ã£ã¨æ•™ãˆã¦ï¼Ÿã€</li><li>ã€Œâ€¦ã¯ãªãœã‹æ°—ã«ãªã‚‹ãªã€</li><li>ã€Œâ€¦ã‚’ç†è§£ã™ã‚‹ã®ã‚’æ‰‹ä¼ã£ã¦ï¼Ÿã€</li>"
            },
            tool5: {
                title: "Extend (æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å…±æœ‰ã™ã‚‹)",
                desc: "<strong class='font-bold text-gray-900'>ä½•ã‚’è¨€ã†ã‹:</strong> å‹é”ã®è©±ã‚’èã„ã¦<em>æ€ã„æµ®ã‹ã‚“ã </em>æ–°ã—ã„è€ƒãˆã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚",
                ex: "<strong class='font-bold'>ä¾‹:</strong> ã€Œã‚ãªãŸã®è©±ã‚’èã„ã¦ã€è‡ªåˆ†ã®ç”ºã‚’æ–°ã—ã„ç›®ã§è¦‹ã‚‹ã“ã¨ãŒã§ããŸã‚ˆï¼ã€"
            },
            rules: {
                title: "ç§ãŸã¡ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼å®‰å…¨ãŠè©±ãƒ«ãƒ¼ãƒ«"
            },
            rule1: {
                title: "å£°ã§è©±ãã†ï¼",
                desc: "ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã¯æ™‚ã€…é›£ã—ã„ã§ã™ï¼ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ï¼ˆéŒ²éŸ³æ©Ÿï¼‰ã‚’ä½¿ã£ã¦ã€è‡ªåˆ†ã®è€ƒãˆã‚’å£°ã§æ®‹ã—ã¦ã‚‚**å…¨ãå•é¡Œã‚ã‚Šã¾ã›ã‚“**ã€‚"
            },
            rule2: {
                title: "è¦ªåˆ‡ã«ã€å°Šæ•¬ã®æ°—æŒã¡ã‚’è¾¼ã‚ã¦",
                desc: "ç§ãŸã¡ã¯ã„ã¤ã‚‚æœ¬å½“ã®å‹é”ã¨è©±ã—ã¦ã„ã¾ã™ã€‚å‹é”ã®å®¶æ—ã€å®¶ã€æ°—æŒã¡ã‚’**çµ¶å¯¾ã«**ã‹ã‚‰ã‹ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚ç§ãŸã¡ã¯ãƒãƒ¼ãƒ ã§ã™ï¼"
            },
            keys: {
                title: "è¦šãˆã‚‹æ–¹æ³•: è¦ªåˆ‡ãªã‚«ã‚®",
                p: "ã“ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã‚’ã€å‹é”ã®å¿ƒã‚’é–‹ã<strong>ã€Œè¦ªåˆ‡ãªã‚«ã‚®ã€</strong>ã ã¨æ€ã£ã¦ãã ã•ã„ã€‚ç§ãŸã¡ã¯é“å…·ã‚’ä½¿ã£ã¦ä¸å¯§ã«*ãƒˆãƒ³ãƒˆãƒ³*ã¨ãƒãƒƒã‚¯ã—ã€ã€Œã‚‚ã£ã¨çŸ¥ã£ã¦ã‚‚ã„ã„ï¼Ÿã€ã¨å„ªã—ãå°‹ã­ã¾ã™ã€‚"
            }
        },
        'fr': {
            header: {
                title: "Parlons Ensemble !",
                subtitle: "Bienvenue dans notre <strong class='font-bold text-blue-600'>BoÃ®te Ã  Outils de Discussion</strong> ! Cette boÃ®te nous aide Ã  Ãªtre de bons auditeurs, Ã  partager nos grandes idÃ©es et Ã  poser des questions gentilles."
            },
            tools: {
                title: "Nos 5 Super Outils de Discussion !"
            },
            tool1: {
                title: "Notice (Dire ce que tu vois)",
                desc: "<strong class='font-bold text-gray-900'>Quoi dire :</strong> Partage la <em>toute premiÃ¨re</em> chose que tu vois dans le dessin, l'histoire ou le projet d'un ami.",
                ex: "<strong class='font-bold'>Exemple :</strong> \"J'ai remarquÃ© l'oiseau rouge vif dans ton dessin !\""
            },
            tool2: {
                title: "Appreciate (Dire quelque chose de gentil)",
                desc: "<strong class='font-bold text-gray-900'>Quoi dire :</strong> Partage ce que tu as prÃ©fÃ©rÃ© ou ce que tu as trouvÃ© super cool dans l'idÃ©e de ton ami.",
                ex: "<strong class='font-bold'>Exemple :</strong> \"Wow, j'adore comment tu as construit cette haute tour avec les blocs !\""
            },
            tool3: {
                title: "Connect (Trouver ce qui est pareil)",
                desc: "<strong class='font-bold text-gray-900'>Quoi dire :</strong> Raconte en quoi l'histoire de ton ami ressemble Ã  quelque chose dans <em>ta</em> vie.",
                ex: "<strong class='font-bold'>Exemple :</strong> \"Tu as une petite sÅ“ur ? J'ai une petite sÅ“ur aussi ! C'est une chouette connexion.\""
            },
            tool4: {
                title: "Probe (Demander pour en savoir plus)",
                desc: "<strong class='font-bold text-gray-900'>Quoi dire :</strong> Pose une question gentille parce que tu es curieux et que tu veux en savoir plus. Tu peux commencer par :",
                list: "<li>\"Parle-moi en plus de...\"</li><li>\"Je me demande pourquoi...\"</li><li>\"Aide-moi Ã  comprendre...\"</li>"
            },
            tool5: {
                title: "Extend (Partager une nouvelle idÃ©e)",
                desc: "<strong class='font-bold text-gray-900'>Quoi dire :</strong> Partage une nouvelle pensÃ©e qui t'est <em>venue Ã  l'esprit</em> aprÃ¨s avoir Ã©coutÃ© ton ami.",
                ex: "<strong class='font-bold'>Example :</strong> \"Ã‰couter ton histoire m'a fait penser Ã  mon propre quartier d'une nouvelle faÃ§on !\""
            },
            rules: {
                title: "Nos Super RÃ¨gles de Discussion SÃ©curisÃ©es"
            },
            rule1: {
                title: "Parle avec ta voix !",
                desc: "Taper au clavier est parfois difficile ! C'est **toujours correct** d'utiliser l'enregistreur vocal (le bouton micro) pour partager tes pensÃ©es."
            },
            rule2: {
                title: "Sois gentil et respectueux",
                desc: "Nous parlons toujours Ã  l'un de nos vrais amis. On ne se moque **jamais** de la famille, de la maison ou des sentiments d'un ami. Nous sommes une Ã©quipe !"
            },
            keys: {
                title: "Un moyen de s'en souvenir : Les ClÃ©s de la Gentillesse",
                p: "Pense Ã  cette boÃ®te Ã  outils comme Ã  un jeu de <strong>\"ClÃ©s de la Gentillesse\"</strong> pour ouvrir doucement l'histoire d'un ami. Nous utilisons nos outils pour *toc-toc* poliment et demander gentiment : \"Puis-je en savoir plus ?\""
            }
        }
    };

    // ìŒì„± í•©ì„± ì¤€ë¹„
    const synth = window.speechSynthesis;
    let voices = [];

    function loadVoices() {
        voices = synth.getVoices();
    }

    // íƒœê·¸/ì´ëª¨ì§€ ì œê±°
    function stripHtml(html) {
        let doc = new DOMParser().parseFromString(html, 'text/html');
        let text = (doc.body.textContent || "").replace(/(\r\n|\n|\r)/gm, " ").trim();
        const emojiRegex = /(\p{Emoji_Presentation}|\p{Emoji}\uFE0F|\p{Emoji_Modifier_Base}|\p{Emoji_Component}|\u200d)/gu;
        return text.replace(emojiRegex, '');
    }

    function findVoice(langCode) {
        if (voices.length === 0) {
            voices = synth.getVoices();
        }

        let voice = null;
        const baseLang = langCode.split('-')[0];

        if (langCode === 'ko-KR')
            voice = voices.find(v => v.lang === 'ko-KR' && (v.name === 'Yuna' || v.name === 'ìœ ë‚˜'));
        else if (langCode === 'ja-JP')
            voice = voices.find(v => v.lang === 'ja-JP' && v.name === 'Kyoko');
        else if (langCode === 'fr-CA')
            voice = voices.find(v => v.lang === 'fr-CA' && v.name === 'AmÃ©lie');
        else if (langCode === 'en-US')
            voice = voices.find(v => v.lang === 'en-US' && v.name && v.name.includes('Google'));

        if (!voice) voice = voices.find(v => v.lang === langCode);
        if (!voice) voice = voices.find(v => v.lang.startsWith(baseLang));

        return voice;
    }

    function speak(text, lang) {
        if (synth.speaking) {
            synth.cancel();
        }
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;

        const voice = findVoice(lang);
        if (voice) {
            utterance.voice = voice;
        }

        synth.speak(utterance);
    }

    // ë²„íŠ¼ì—ì„œ í˜¸ì¶œ
    window.speakText = function(buttonElement) {
        const card = buttonElement.closest('[data-content-id]');
        if (!card) return;

        const contentId = card.dataset.contentId;
        const currentLang = document.getElementById('language-select').value;
        const langCode = {
            'en': 'en-US',
            'ko': 'ko-KR',
            'ja': 'ja-JP',
            'fr': 'fr-CA'
        }[currentLang];

        const contentData = translations[currentLang][contentId];
        if (!contentData) return;

        const textToSpeak = Object.values(contentData)
            .map(stripHtml)
            .join('. ');

        speak(textToSpeak, langCode);
    }

    // ì–¸ì–´ ë³€ê²½
    function getNestedValue(obj, key) {
        return key.split('.').reduce((acc, part) => acc && acc[part], obj);
    }

    function changeLanguage() {
        if (synth.speaking) {
            synth.cancel();
        }

        const lang = document.getElementById('language-select').value;
        document.documentElement.lang = lang;

        const elementsToTranslate = document.querySelectorAll('[data-translate-key]');
        
        elementsToTranslate.forEach(el => {
            const key = el.dataset.translateKey;
            const translatedText = getNestedValue(translations[lang], key);
            
            if (translatedText !== undefined) {
                el.innerHTML = translatedText;
            }
        });
    }

    document.getElementById('language-select').addEventListener('change', changeLanguage);
    
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }

    window.addEventListener('DOMContentLoaded', () => {
        loadVoices();
        changeLanguage();
    });
</script>

</body>
</html>
